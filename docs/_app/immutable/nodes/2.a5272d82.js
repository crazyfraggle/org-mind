import{s as ee,f as k,l as D,a as U,g as y,h as $,m as S,d as g,c as P,j as E,i as L,x as m,A as J,n as z,y as A,B as tt,p as Q,C as H,e as re,D as ce,o as _e,E as We,F as de,G as ve,H as He,I as Xe,J as pe}from"../chunks/scheduler.4d17257f.js";import{S as te,i as le,a as v,g as j,c as V,t as T,b as M,d as F,m as K,e as W,f as Ye}from"../chunks/index.a3ae13d4.js";function x(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function lt(s){let e,n,l,t,i,o,c,a;return{c(){e=k("div"),n=k("label"),l=D(s[3]),t=k("input"),i=U(),o=k("canvas"),this.h()},l(d){e=y(d,"DIV",{class:!0});var r=$(e);n=y(r,"LABEL",{class:!0});var h=$(n);l=S(h,s[3]),t=y(h,"INPUT",{type:!0,class:!0}),h.forEach(g),i=P(r),o=y(r,"CANVAS",{class:!0}),$(o).forEach(g),r.forEach(g),this.h()},h(){E(t,"type","checkbox"),E(t,"class","svelte-gjkueq"),E(n,"class","expander svelte-gjkueq"),E(o,"class","svelte-gjkueq"),E(e,"class","expander svelte-gjkueq")},m(d,r){L(d,e,r),m(e,n),m(n,l),m(n,t),t.checked=s[0],m(e,i),m(e,o),s[6](o),s[7](e),c||(a=J(t,"change",s[5]),c=!0)},p(d,[r]){r&8&&z(l,d[3]),r&1&&(t.checked=d[0])},i:A,o:A,d(d){d&&g(e),s[6](null),s[7](null),c=!1,a()}}}function nt(s,e,n){let l,{isExpanded:t=!1}=e,{exits:i=[]}=e;const o=tt();let c=null,a=null;const d=(u,_)=>{const p=c==null?void 0:c.getContext("2d");if(console.log(c,p),!p||!c||!a)return;n(1,c.width=a.clientWidth,c),n(1,c.height=a.clientHeight,c);const b=c.getBoundingClientRect(),w=b.width,R=b.height;console.log(w,R),p.strokeStyle="black",p.lineWidth=1,p.beginPath(),p.moveTo(0,R/2),p.lineTo(w/2,R/2),u.forEach(X=>{p.moveTo(w/2,R/2),p.arcTo(w/2,X,w,X,w/2)}),p.stroke()};function r(){t=this.checked,n(0,t)}function h(u){Q[u?"unshift":"push"](()=>{c=u,n(1,c)})}function f(u){Q[u?"unshift":"push"](()=>{a=u,n(2,a)})}return s.$$set=u=>{"isExpanded"in u&&n(0,t=u.isExpanded),"exits"in u&&n(4,i=u.exits)},s.$$.update=()=>{s.$$.dirty&1&&n(3,l=t?"âž–":"âž•"),s.$$.dirty&1&&o("expanded",t),s.$$.dirty&17&&d(i)},[t,c,a,l,i,r,h,f]}class Ge extends te{constructor(e){super(),le(this,e,nt,lt,ee,{isExpanded:0,exits:4})}}function ot(s){let e,n;return{c(){e=k("p"),n=D(s[0])},l(l){e=y(l,"P",{});var t=$(e);n=S(t,s[0]),t.forEach(g)},m(l,t){L(l,e,t),m(e,n)},p(l,[t]){t&1&&z(n,l[0])},i:A,o:A,d(l){l&&g(e)}}}function it(s,e,n){let{text:l=""}=e;return s.$$set=t=>{"text"in t&&n(0,l=t.text)},[l]}class st extends te{constructor(e){super(),le(this,e,it,ot,ee,{text:0})}}function ke(s,e,n){const l=s.slice();return l[1]=e[n],l}function ye(s,e,n){const l=s.slice();return l[10]=e[n],l}function Ee(s,e,n){const l=s.slice();return l[10]=e[n],l}function we(s,e,n){const l=s.slice();return l[4]=e[n],l}function $e(s,e,n){const l=s.slice();return l[7]=e[n],l}function rt(s){let e,n,l=s[1].text+"",t;return{c(){e=k("pre"),n=k("code"),t=D(l)},l(i){e=y(i,"PRE",{});var o=$(e);n=y(o,"CODE",{});var c=$(n);t=S(c,l),c.forEach(g),o.forEach(g)},m(i,o){L(i,e,o),m(e,n),m(n,t)},p(i,o){o&1&&l!==(l=i[1].text+"")&&z(t,l)},i:A,o:A,d(i){i&&g(e)}}}function ct(s){let e,n,l=x(s[1].items),t=[];for(let i=0;i<l.length;i+=1)t[i]=Te(ye(s,l,i));return{c(){e=k("ol");for(let i=0;i<t.length;i+=1)t[i].c();n=U()},l(i){e=y(i,"OL",{});var o=$(e);for(let c=0;c<t.length;c+=1)t[c].l(o);n=P(o),o.forEach(g)},m(i,o){L(i,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);m(e,n)},p(i,o){if(o&1){l=x(i[1].items);let c;for(c=0;c<l.length;c+=1){const a=ye(i,l,c);t[c]?t[c].p(a,o):(t[c]=Te(a),t[c].c(),t[c].m(e,n))}for(;c<t.length;c+=1)t[c].d(1);t.length=l.length}},i:A,o:A,d(i){i&&g(e),H(t,i)}}}function at(s){let e,n,l=x(s[1].items),t=[];for(let i=0;i<l.length;i+=1)t[i]=Ce(Ee(s,l,i));return{c(){e=k("ul");for(let i=0;i<t.length;i+=1)t[i].c();n=U()},l(i){e=y(i,"UL",{});var o=$(e);for(let c=0;c<t.length;c+=1)t[c].l(o);n=P(o),o.forEach(g)},m(i,o){L(i,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);m(e,n)},p(i,o){if(o&1){l=x(i[1].items);let c;for(c=0;c<l.length;c+=1){const a=Ee(i,l,c);t[c]?t[c].p(a,o):(t[c]=Ce(a),t[c].c(),t[c].m(e,n))}for(;c<t.length;c+=1)t[c].d(1);t.length=l.length}},i:A,o:A,d(i){i&&g(e),H(t,i)}}}function ft(s){let e,n,l=x(s[1].rows),t=[];for(let i=0;i<l.length;i+=1)t[i]=Le(we(s,l,i));return{c(){e=k("table");for(let i=0;i<t.length;i+=1)t[i].c();n=U()},l(i){e=y(i,"TABLE",{});var o=$(e);for(let c=0;c<t.length;c+=1)t[c].l(o);n=P(o),o.forEach(g)},m(i,o){L(i,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);m(e,n)},p(i,o){if(o&1){l=x(i[1].rows);let c;for(c=0;c<l.length;c+=1){const a=we(i,l,c);t[c]?t[c].p(a,o):(t[c]=Le(a),t[c].c(),t[c].m(e,n))}for(;c<t.length;c+=1)t[c].d(1);t.length=l.length}},i:A,o:A,d(i){i&&g(e),H(t,i)}}}function ut(s){let e,n=s[1].text+"",l;return{c(){e=k("pre"),l=D(n)},l(t){e=y(t,"PRE",{});var i=$(e);l=S(i,n),i.forEach(g)},m(t,i){L(t,e,i),m(e,l)},p(t,i){i&1&&n!==(n=t[1].text+"")&&z(l,n)},i:A,o:A,d(t){t&&g(e)}}}function ht(s){let e,n;return e=new st({props:{text:s[1].text}}),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.text=l[1].text),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function Te(s){let e,n=s[10]+"",l;return{c(){e=k("li"),l=D(n)},l(t){e=y(t,"LI",{});var i=$(e);l=S(i,n),i.forEach(g)},m(t,i){L(t,e,i),m(e,l)},p(t,i){i&1&&n!==(n=t[10]+"")&&z(l,n)},d(t){t&&g(e)}}}function Ce(s){let e,n=s[10]+"",l;return{c(){e=k("li"),l=D(n)},l(t){e=y(t,"LI",{});var i=$(e);l=S(i,n),i.forEach(g)},m(t,i){L(t,e,i),m(e,l)},p(t,i){i&1&&n!==(n=t[10]+"")&&z(l,n)},d(t){t&&g(e)}}}function Re(s){let e,n=s[7]+"",l;return{c(){e=k("td"),l=D(n)},l(t){e=y(t,"TD",{});var i=$(e);l=S(i,n),i.forEach(g)},m(t,i){L(t,e,i),m(e,l)},p(t,i){i&1&&n!==(n=t[7]+"")&&z(l,n)},d(t){t&&g(e)}}}function Le(s){let e,n=x(s[4]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Re($e(s,n,t));return{c(){e=k("tr");for(let t=0;t<l.length;t+=1)l[t].c()},l(t){e=y(t,"TR",{});var i=$(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(g)},m(t,i){L(t,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(t,i){if(i&1){n=x(t[4]);let o;for(o=0;o<n.length;o+=1){const c=$e(t,n,o);l[o]?l[o].p(c,i):(l[o]=Re(c),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){t&&g(e),H(l,t)}}}function Oe(s){let e,n,l,t;const i=[ht,ut,ft,at,ct,rt],o=[];function c(a,d){return a[1].type==="text"?0:a[1].type==="preformatted"?1:a[1].type==="table"?2:a[1].type==="unorderedList"?3:a[1].type==="orderedList"?4:a[1].type==="source"?5:-1}return~(e=c(s))&&(n=o[e]=i[e](s)),{c(){n&&n.c(),l=re()},l(a){n&&n.l(a),l=re()},m(a,d){~e&&o[e].m(a,d),L(a,l,d),t=!0},p(a,d){let r=e;e=c(a),e===r?~e&&o[e].p(a,d):(n&&(j(),T(o[r],1,1,()=>{o[r]=null}),V()),~e?(n=o[e],n?n.p(a,d):(n=o[e]=i[e](a),n.c()),v(n,1),n.m(l.parentNode,l)):n=null)},i(a){t||(v(n),t=!0)},o(a){T(n),t=!1},d(a){a&&g(l),~e&&o[e].d(a)}}}function dt(s){let e,n,l=x(s[0]),t=[];for(let o=0;o<l.length;o+=1)t[o]=Oe(ke(s,l,o));const i=o=>T(t[o],1,1,()=>{t[o]=null});return{c(){e=k("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var c=$(e);for(let a=0;a<t.length;a+=1)t[a].l(c);c.forEach(g),this.h()},h(){E(e,"class","body")},m(o,c){L(o,e,c);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);n=!0},p(o,[c]){if(c&1){l=x(o[0]);let a;for(a=0;a<l.length;a+=1){const d=ke(o,l,a);t[a]?(t[a].p(d,c),v(t[a],1)):(t[a]=Oe(d),t[a].c(),v(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)i(a);V()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)v(t[c]);n=!0}},o(o){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)T(t[c]);n=!1},d(o){o&&g(e),H(t,o)}}}function pt(s,e,n){let{bodyparts:l=[]}=e;return s.$$set=t=>{"bodyparts"in t&&n(0,l=t.bodyparts)},[l]}class Je extends te{constructor(e){super(),le(this,e,pt,dt,ee,{bodyparts:0})}}function Be(s,e,n){const l=s.slice();return l[12]=e[n],l}function Ie(s){let e,n,l=s[5]?"ðŸ”¼":"ðŸ”½",t,i,o,c,a,d,r=s[5]&&Ne(s);return{c(){e=k("label"),n=k("input"),t=D(l),i=U(),r&&r.c(),o=re(),this.h()},l(h){e=y(h,"LABEL",{});var f=$(e);n=y(f,"INPUT",{type:!0,class:!0}),t=S(f,l),f.forEach(g),i=P(h),r&&r.l(h),o=re(),this.h()},h(){E(n,"type","checkbox"),E(n,"class","svelte-1jwp36v")},m(h,f){L(h,e,f),m(e,n),n.checked=s[5],m(e,t),L(h,i,f),r&&r.m(h,f),L(h,o,f),c=!0,a||(d=J(n,"change",s[6]),a=!0)},p(h,f){f&32&&(n.checked=h[5]),(!c||f&32)&&l!==(l=h[5]?"ðŸ”¼":"ðŸ”½")&&z(t,l),h[5]?r?(r.p(h,f),f&32&&v(r,1)):(r=Ne(h),r.c(),v(r,1),r.m(o.parentNode,o)):r&&(j(),T(r,1,1,()=>{r=null}),V())},i(h){c||(v(r),c=!0)},o(h){T(r),c=!1},d(h){h&&(g(e),g(i),g(o)),r&&r.d(h),a=!1,d()}}}function Ne(s){let e,n;return e=new Je({props:{bodyparts:s[0].body}}),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.bodyparts=l[0].body),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function Ue(s){let e,n,l,t,i,o;function c(f){s[7](f)}let a={exits:s[4]};s[1]!==void 0&&(a.isExpanded=s[1]),e=new Ge({props:a}),Q.push(()=>Ye(e,"isExpanded",c)),e.$on("expanded",s[8]);let d=x(s[0].children),r=[];for(let f=0;f<d.length;f+=1)r[f]=Pe(Be(s,d,f));const h=f=>T(r[f],1,1,()=>{r[f]=null});return{c(){M(e.$$.fragment),l=U(),t=k("ul");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){F(e.$$.fragment,f),l=P(f),t=y(f,"UL",{class:!0});var u=$(t);for(let _=0;_<r.length;_+=1)r[_].l(u);u.forEach(g),this.h()},h(){E(t,"class",i=ce(s[1]?"expanded":"collapsed")+" svelte-1jwp36v")},m(f,u){K(e,f,u),L(f,l,u),L(f,t,u);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(t,null);s[9](t),o=!0},p(f,u){const _={};if(u&16&&(_.exits=f[4]),!n&&u&2&&(n=!0,_.isExpanded=f[1],We(()=>n=!1)),e.$set(_),u&1){d=x(f[0].children);let p;for(p=0;p<d.length;p+=1){const b=Be(f,d,p);r[p]?(r[p].p(b,u),v(r[p],1)):(r[p]=Pe(b),r[p].c(),v(r[p],1),r[p].m(t,null))}for(j(),p=d.length;p<r.length;p+=1)h(p);V()}(!o||u&2&&i!==(i=ce(f[1]?"expanded":"collapsed")+" svelte-1jwp36v"))&&E(t,"class",i)},i(f){if(!o){v(e.$$.fragment,f);for(let u=0;u<d.length;u+=1)v(r[u]);o=!0}},o(f){T(e.$$.fragment,f),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)T(r[u]);o=!1},d(f){f&&(g(l),g(t)),W(e,f),H(r,f),s[9](null)}}}function Pe(s){let e,n;return e=new Qe({props:{node:s[12]}}),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.node=l[12]),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function _t(s){let e,n,l,t=s[0].title+"",i,o,c,a,d,r=s[0].body.length>0&&Ie(s),h=s[0].children.length>0&&Ue(s);return{c(){e=k("li"),n=k("div"),l=k("span"),i=D(t),c=U(),r&&r.c(),a=U(),h&&h.c(),this.h()},l(f){e=y(f,"LI",{class:!0});var u=$(e);n=y(u,"DIV",{class:!0});var _=$(n);l=y(_,"SPAN",{class:!0});var p=$(l);i=S(p,t),p.forEach(g),c=P(_),r&&r.l(_),_.forEach(g),a=P(u),h&&h.l(u),u.forEach(g),this.h()},h(){E(l,"class",o=ce(`title ${s[0].state}`)+" svelte-1jwp36v"),E(n,"class","subtopicContainer svelte-1jwp36v"),E(e,"class","subtopic svelte-1jwp36v")},m(f,u){L(f,e,u),m(e,n),m(n,l),m(l,i),m(n,c),r&&r.m(n,null),m(e,a),h&&h.m(e,null),s[10](e),d=!0},p(f,[u]){(!d||u&1)&&t!==(t=f[0].title+"")&&z(i,t),(!d||u&1&&o!==(o=ce(`title ${f[0].state}`)+" svelte-1jwp36v"))&&E(l,"class",o),f[0].body.length>0?r?(r.p(f,u),u&1&&v(r,1)):(r=Ie(f),r.c(),v(r,1),r.m(n,null)):r&&(j(),T(r,1,1,()=>{r=null}),V()),f[0].children.length>0?h?(h.p(f,u),u&1&&v(h,1)):(h=Ue(f),h.c(),v(h,1),h.m(e,null)):h&&(j(),T(h,1,1,()=>{h=null}),V())},i(f){d||(v(r),v(h),d=!0)},o(f){T(r),T(h),d=!1},d(f){f&&g(e),r&&r.d(),h&&h.d(),s[10](null)}}}function gt(s,e,n){let{node:l}=e,t=!1,i=null,o=null,c=[],a=!1;const d=p=>{const b=(o==null?void 0:o.getBoundingClientRect())||{top:0};n(4,c=p?Array.from((o==null?void 0:o.children)||[]).map(w=>w.getBoundingClientRect()).map(w=>(console.log(w),w)).map(w=>w.top-b.top+w.height/2):[])};_e(()=>{const p=new ResizeObserver(b=>{b.forEach(w=>{console.log("Resizing",w),d(t)})});return p.observe(i),()=>p.unobserve(i)});function r(){a=this.checked,n(5,a)}function h(p){t=p,n(1,t)}function f(p){de.call(this,s,p)}function u(p){Q[p?"unshift":"push"](()=>{o=p,n(3,o)})}function _(p){Q[p?"unshift":"push"](()=>{i=p,n(2,i)})}return s.$$set=p=>{"node"in p&&n(0,l=p.node)},[l,t,i,o,c,a,r,h,f,u,_]}class Qe extends te{constructor(e){super(),le(this,e,gt,_t,ee,{node:0})}}function xe(s,e,n){const l=s.slice();return l[13]=e[n],l}function Ae(s){let e,n,l=s[5]?"ðŸ”¼":"ðŸ”½",t,i,o,c,a,d,r=s[5]&&De(s);return{c(){e=k("label"),n=k("input"),t=D(l),i=U(),r&&r.c(),o=re(),this.h()},l(h){e=y(h,"LABEL",{});var f=$(e);n=y(f,"INPUT",{type:!0,class:!0}),t=S(f,l),f.forEach(g),i=P(h),r&&r.l(h),o=re(),this.h()},h(){E(n,"type","checkbox"),E(n,"class","svelte-yffp4b")},m(h,f){L(h,e,f),m(e,n),n.checked=s[5],m(e,t),L(h,i,f),r&&r.m(h,f),L(h,o,f),c=!0,a||(d=J(n,"change",s[6]),a=!0)},p(h,f){f&32&&(n.checked=h[5]),(!c||f&32)&&l!==(l=h[5]?"ðŸ”¼":"ðŸ”½")&&z(t,l),h[5]?r?(r.p(h,f),f&32&&v(r,1)):(r=De(h),r.c(),v(r,1),r.m(o.parentNode,o)):r&&(j(),T(r,1,1,()=>{r=null}),V())},i(h){c||(v(r),c=!0)},o(h){T(r),c=!1},d(h){h&&(g(e),g(i),g(o)),r&&r.d(h),a=!1,d()}}}function De(s){let e,n;return e=new Je({props:{bodyparts:s[0].body}}),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.bodyparts=l[0].body),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function Se(s){let e,n,l,t,i,o;function c(f){s[7](f)}let a={exits:s[4]};s[1]!==void 0&&(a.isExpanded=s[1]),e=new Ge({props:a}),Q.push(()=>Ye(e,"isExpanded",c)),e.$on("expanded",s[8]);let d=x(s[0].children),r=[];for(let f=0;f<d.length;f+=1)r[f]=je(xe(s,d,f));const h=f=>T(r[f],1,1,()=>{r[f]=null});return{c(){M(e.$$.fragment),l=U(),t=k("ul");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){F(e.$$.fragment,f),l=P(f),t=y(f,"UL",{class:!0});var u=$(t);for(let _=0;_<r.length;_+=1)r[_].l(u);u.forEach(g),this.h()},h(){E(t,"class",i=ce("subtopics "+(s[1]?"expanded":"collapsed"))+" svelte-yffp4b")},m(f,u){K(e,f,u),L(f,l,u),L(f,t,u);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(t,null);s[10](t),o=!0},p(f,u){const _={};if(u&16&&(_.exits=f[4]),!n&&u&2&&(n=!0,_.isExpanded=f[1],We(()=>n=!1)),e.$set(_),u&1){d=x(f[0].children);let p;for(p=0;p<d.length;p+=1){const b=xe(f,d,p);r[p]?(r[p].p(b,u),v(r[p],1)):(r[p]=je(b),r[p].c(),v(r[p],1),r[p].m(t,null))}for(j(),p=d.length;p<r.length;p+=1)h(p);V()}(!o||u&2&&i!==(i=ce("subtopics "+(f[1]?"expanded":"collapsed"))+" svelte-yffp4b"))&&E(t,"class",i)},i(f){if(!o){v(e.$$.fragment,f);for(let u=0;u<d.length;u+=1)v(r[u]);o=!0}},o(f){T(e.$$.fragment,f),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)T(r[u]);o=!1},d(f){f&&(g(l),g(t)),W(e,f),H(r,f),s[10](null)}}}function je(s){let e,n;return e=new Qe({props:{node:s[13]}}),e.$on("expanded",s[9]),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.node=l[13]),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function mt(s){let e,n,l,t=s[0].title+"",i,o,c,a,d=s[0].body.length>0&&Ae(s),r=s[0].children.length>0&&Se(s);return{c(){e=k("li"),n=k("div"),l=k("span"),i=D(t),o=U(),d&&d.c(),c=U(),r&&r.c(),this.h()},l(h){e=y(h,"LI",{class:!0});var f=$(e);n=y(f,"DIV",{class:!0});var u=$(n);l=y(u,"SPAN",{class:!0});var _=$(l);i=S(_,t),_.forEach(g),o=P(u),d&&d.l(u),u.forEach(g),c=P(f),r&&r.l(f),f.forEach(g),this.h()},h(){E(l,"class","title svelte-yffp4b"),E(n,"class","topicContainer svelte-yffp4b"),E(e,"class","topic svelte-yffp4b")},m(h,f){L(h,e,f),m(e,n),m(n,l),m(l,i),m(n,o),d&&d.m(n,null),m(e,c),r&&r.m(e,null),s[11](e),a=!0},p(h,[f]){(!a||f&1)&&t!==(t=h[0].title+"")&&z(i,t),h[0].body.length>0?d?(d.p(h,f),f&1&&v(d,1)):(d=Ae(h),d.c(),v(d,1),d.m(n,null)):d&&(j(),T(d,1,1,()=>{d=null}),V()),h[0].children.length>0?r?(r.p(h,f),f&1&&v(r,1)):(r=Se(h),r.c(),v(r,1),r.m(e,null)):r&&(j(),T(r,1,1,()=>{r=null}),V())},i(h){a||(v(d),v(r),a=!0)},o(h){T(d),T(r),a=!1},d(h){h&&g(e),d&&d.d(),r&&r.d(),s[11](null)}}}function bt(s,e,n){let{orgnode:l}=e,t=!1,i=null,o=null,c=[],a=!1;const d=b=>{const w=(o==null?void 0:o.getBoundingClientRect())||{top:0};n(4,c=b?Array.from((o==null?void 0:o.children)||[]).map(R=>R.getBoundingClientRect()).map(R=>(console.log(R),R)).map(R=>R.top-w.top+R.height/2):[])};_e(()=>{const b=new ResizeObserver(w=>{w.forEach(R=>{console.log("Resizing",R),d(t)})});return b.observe(i),()=>b.unobserve(i)});function r(){a=this.checked,n(5,a)}function h(b){t=b,n(1,t)}function f(b){de.call(this,s,b)}function u(b){de.call(this,s,b)}function _(b){Q[b?"unshift":"push"](()=>{o=b,n(3,o)})}function p(b){Q[b?"unshift":"push"](()=>{i=b,n(2,i)})}return s.$$set=b=>{"orgnode"in b&&n(0,l=b.orgnode)},[l,t,i,o,c,a,r,h,f,u,_,p]}class Ze extends te{constructor(e){super(),le(this,e,bt,mt,ee,{orgnode:0})}}function Ve(s,e,n){const l=s.slice();return l[10]=e[n],l[12]=n,l}function ze(s,e,n){const l=s.slice();return l[10]=e[n],l[12]=n,l}function qe(s){let e,n,l=x(s[3]),t=[];for(let o=0;o<l.length;o+=1)t[o]=Me(ze(s,l,o));const i=o=>T(t[o],1,1,()=>{t[o]=null});return{c(){e=k("ul");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=y(o,"UL",{id:!0,class:!0});var c=$(e);for(let a=0;a<t.length;a+=1)t[a].l(c);c.forEach(g),this.h()},h(){E(e,"id","left"),E(e,"class","svelte-1hv2ytr")},m(o,c){L(o,e,c);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);n=!0},p(o,c){if(c&40){l=x(o[3]);let a;for(a=0;a<l.length;a+=1){const d=ze(o,l,a);t[a]?(t[a].p(d,c),v(t[a],1)):(t[a]=Me(d),t[a].c(),v(t[a],1),t[a].m(e,null))}for(j(),a=l.length;a<t.length;a+=1)i(a);V()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)v(t[c]);n=!0}},o(o){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)T(t[c]);n=!1},d(o){o&&g(e),H(t,o)}}}function Me(s){let e,n;return e=new Ze({props:{orgnode:s[10]}}),e.$on("expanded",s[5]),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&8&&(i.orgnode=l[10]),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function Fe(s){let e,n;return e=new Ze({props:{orgnode:s[10]}}),e.$on("expanded",s[5]),{c(){M(e.$$.fragment)},l(l){F(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&16&&(i.orgnode=l[10]),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){W(e,l)}}}function vt(s){let e,n,l,t,i,o,c,a,d,r,h,f,u,_,p=s[1].title+"",b,w,R,X,Y,Z,ae,ne,O=!s[2]&&qe(s),q=x(s[4]),B=[];for(let C=0;C<q.length;C+=1)B[C]=Fe(Ve(s,q,C));const et=C=>T(B[C],1,1,()=>{B[C]=null});return{c(){e=k("div"),n=k("label"),l=k("input"),t=D("Right only"),i=U(),o=k("label"),c=D("Level: "),a=k("input"),d=U(),r=k("div"),h=k("div"),O&&O.c(),f=U(),u=k("div"),_=k("span"),b=D(p),w=U(),R=k("ul");for(let C=0;C<B.length;C+=1)B[C].c();X=U(),Y=k("canvas"),this.h()},l(C){e=y(C,"DIV",{id:!0,class:!0});var I=$(e);n=y(I,"LABEL",{});var N=$(n);l=y(N,"INPUT",{type:!0}),t=S(N,"Right only"),N.forEach(g),i=P(I),o=y(I,"LABEL",{});var oe=$(o);c=S(oe,"Level: "),a=y(oe,"INPUT",{type:!0}),oe.forEach(g),I.forEach(g),d=P(C),r=y(C,"DIV",{id:!0,class:!0});var fe=$(r);h=y(fe,"DIV",{id:!0,class:!0});var ie=$(h);O&&O.l(ie),f=P(ie),u=y(ie,"DIV",{id:!0,class:!0});var ge=$(u);_=y(ge,"SPAN",{class:!0});var me=$(_);b=S(me,p),me.forEach(g),ge.forEach(g),w=P(ie),R=y(ie,"UL",{id:!0,class:!0});var be=$(R);for(let ue=0;ue<B.length;ue+=1)B[ue].l(be);be.forEach(g),ie.forEach(g),X=P(fe),Y=y(fe,"CANVAS",{id:!0,class:!0}),$(Y).forEach(g),fe.forEach(g),this.h()},h(){E(l,"type","checkbox"),E(a,"type","number"),E(e,"id","settings"),E(e,"class","svelte-1hv2ytr"),E(_,"class","title"),E(u,"id","root"),E(u,"class","svelte-1hv2ytr"),E(R,"id","right"),E(R,"class","svelte-1hv2ytr"),E(h,"id","map"),E(h,"class","svelte-1hv2ytr"),E(Y,"id","rootCanvas"),E(Y,"class","svelte-1hv2ytr"),E(r,"id","mapContainer"),E(r,"class","svelte-1hv2ytr")},m(C,I){L(C,e,I),m(e,n),m(n,l),l.checked=s[2],m(n,t),m(e,i),m(e,o),m(o,c),m(o,a),ve(a,s[0]),L(C,d,I),L(C,r,I),m(r,h),O&&O.m(h,null),m(h,f),m(h,u),m(u,_),m(_,b),m(h,w),m(h,R);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(R,null);m(r,X),m(r,Y),Z=!0,ae||(ne=[J(l,"change",s[8]),J(a,"input",s[9])],ae=!0)},p(C,[I]){if(I&4&&(l.checked=C[2]),I&1&&He(a.value)!==C[0]&&ve(a,C[0]),C[2]?O&&(j(),T(O,1,1,()=>{O=null}),V()):O?(O.p(C,I),I&4&&v(O,1)):(O=qe(C),O.c(),v(O,1),O.m(h,f)),(!Z||I&2)&&p!==(p=C[1].title+"")&&z(b,p),I&48){q=x(C[4]);let N;for(N=0;N<q.length;N+=1){const oe=Ve(C,q,N);B[N]?(B[N].p(oe,I),v(B[N],1)):(B[N]=Fe(oe),B[N].c(),v(B[N],1),B[N].m(R,null))}for(j(),N=q.length;N<B.length;N+=1)et(N);V()}},i(C){if(!Z){v(O);for(let I=0;I<q.length;I+=1)v(B[I]);Z=!0}},o(C){T(O),B=B.filter(Boolean);for(let I=0;I<B.length;I+=1)T(B[I]);Z=!1},d(C){C&&(g(e),g(d),g(r)),O&&O.d(),H(B,C),ae=!1,Xe(ne)}}}function kt(s,e,n){let l,t,i,o,{orgtree:c}=e,{level:a=0}=e,d=!1;const r=()=>{setTimeout(()=>{const u=document.getElementById("map"),_=document.getElementById("rootCanvas");if(!u||!_)return;_.width=u.clientWidth,_.height=u.clientHeight;const p=_.getContext("2d");if(!p)return;const b=document.getElementById("root");if(!b)return;const w=u.getBoundingClientRect(),R=b.getBoundingClientRect(),X=R.x+R.width*7/8,Y=R.y+R.height/2,Z=R.x+R.width*1/8,ae=R.y+R.height/2;p.strokeStyle="black",p.lineWidth=2,document.querySelectorAll("#right .topic").forEach(ne=>{const O=ne.getBoundingClientRect(),q=O.x,B=O.y+O.height/2;p.beginPath(),p.moveTo(X-w.x,Y-w.y),p.lineTo(q-w.x,B-w.y),p.stroke()}),document.querySelectorAll("#left .topic").forEach(ne=>{const O=ne.getBoundingClientRect(),q=O.x+O.width,B=O.y+O.height/2;p.beginPath(),p.moveTo(Z-w.x,ae-w.y),p.lineTo(q-w.x,B-w.y),p.stroke()})},0)};_e(()=>{const u=document.getElementById("mapContainer"),_=new ResizeObserver(p=>{p.forEach(b=>{console.log("Resizing",b),r()})});return _.observe(u),()=>_.unobserve(u)});function h(){d=this.checked,n(2,d)}function f(){a=He(this.value),n(0,a)}return s.$$set=u=>{"orgtree"in u&&n(1,c=u.orgtree),"level"in u&&n(0,a=u.level)},s.$$.update=()=>{s.$$.dirty&6&&n(7,l=!d&&c.children.length>2),s.$$.dirty&130&&n(6,t=l?Math.ceil(c.children.length/2):c.children.length),s.$$.dirty&66&&n(4,i=c.children.slice(0,t)),s.$$.dirty&66&&n(3,o=c.children.slice(t))},[a,c,d,o,i,r,t,l,h,f]}class yt extends te{constructor(e){super(),le(this,e,kt,vt,ee,{orgtree:1,level:0})}}const se={header:/^(\*+)\s+(.*)$/,preformatted:/^(\s*):(?: (.*)$|$)/,unorderedListElement:/^(\s*)(?:-|\+|\s+\*)\s+(.*)$/,orderedListElement:/^(\s*)(\d+)(?:\.|\))\s+(.*)$/,tableSeparator:/^(\s*)\|((?:\+|-)*?)\|?$/,tableRow:/^(\s*)\|(.*?)\|?$/,blank:/^\s*$/,horizontalRule:/^(\s*)-{5,}$/,blockdirective:/^(\s*)#\+(?:(begin|end)_)?(.*)$/i,docdirective:/^(\s*)#\+(?:(TITLE|TODO|STARTUP|AUTHOR|DATE)):\s*(.*)$/,comment:/^(\s*)#(.*)$/,line:/^(\s*)(.*)$/};let G={todo:["TODO"],done:["DONE"]};function he(s){const e=s.title;if(e){for(const n of G.todo)if(e.startsWith(n)){s.state="todo",s.stateKeyword=n,s.title=e.slice(n.length).trim();return}for(const n of G.done)if(e.startsWith(n)){s.state="done",s.stateKeyword=n,s.title=e.slice(n.length).trim();return}}}function Et(s){var i;const e={line:0,title:"Untitled Org File",state:"none",stateKeyword:"",body:[],children:[]};let n=e,l=0;const t=s.split(`
`);for(let o=0;o<t.length;o++){const c=t[o];let a=null;if(a=c.match(se.header)){const d=a[1].length,r=a[2];if(d>l){const h={line:o,title:r,state:"none",stateKeyword:"",body:[],children:[],parent:n};he(h),n.children.push(h),n=h,l=d}else if(d===l){const h={line:o,title:r,state:"none",stateKeyword:"",body:[],children:[],parent:n.parent};he(h),(i=n.parent)==null||i.children.push(h),n=h}else if(d<l){const h={line:o,title:r,state:"none",stateKeyword:"",body:[],children:[]},f=l-d;let u=n.parent;for(let _=0;_<f;_++)u=u==null?void 0:u.parent;h.parent=u,u==null||u.children.push(h),he(h),n=h,l=d}}else if(a=c.match(se.docdirective)){console.log("Directive",a[1],a[2],a[3]);const d=a[2],r=a[3];if(d==="TITLE")e.title=r;else if(d==="TODO"){console.log("TODO directive:",r);const[h,f]=r.split("|");G={todo:h.split(" "),done:f.split(" ")},G.todo=G.todo.map(u=>u.trim().replace(/\(.*$/,"")).filter(u=>u),G.done=G.done.map(u=>u.trim().replace(/\(.*$/,"")).filter(u=>u),console.log("TODO keywords:",G)}else console.log("Unknown directive type: ",d)}else if(a=c.match(se.blockdirective)){const[d,r]=a.slice(2),[h,f]=r.split(" ");if(d==="BEGIN"&&h==="SRC"){console.log("SRC block:",f);const u={type:"source",language:f,text:""},_=[];for(let p=o+1;p<t.length;p++){const b=t[p],w=b.match(se.blockdirective);if(w&&w[2]==="END"){o=p;break}_.push(b)}u.text=_.join(`
`),n.body.push(u)}else console.log("Unknown block directive type: ",d,a)}else(a=c.match(se.blank))||((a=c.match(se.line))?n.body.push({type:"text",text:c}):console.log("Unknown line type: ",c))}return e}function Ke(s){let e,n="Reload file",l,t;return{c(){e=k("button"),e.textContent=n,this.h()},l(i){e=y(i,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1y9t0qw"&&(e.textContent=n),this.h()},h(){E(e,"class","svelte-1bkh0a3")},m(i,o){L(i,e,o),l||(t=J(e,"click",s[3]),l=!0)},p:A,d(i){i&&g(e),l=!1,t()}}}function wt(s){let e,n,l="Open file",t,i,o,c="Open URL",a,d,r,h,f,u=s[0]&&Ke(s);return d=new yt({props:{orgtree:s[1]}}),{c(){e=k("div"),n=k("button"),n.textContent=l,t=U(),u&&u.c(),i=U(),o=k("button"),o.textContent=c,a=U(),M(d.$$.fragment),this.h()},l(_){e=y(_,"DIV",{id:!0,class:!0});var p=$(e);n=y(p,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(n)!=="svelte-jlhvw8"&&(n.textContent=l),t=P(p),u&&u.l(p),i=P(p),o=y(p,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(o)!=="svelte-1vc5rp6"&&(o.textContent=c),p.forEach(g),a=P(_),F(d.$$.fragment,_),this.h()},h(){E(n,"class","svelte-1bkh0a3"),E(o,"class","svelte-1bkh0a3"),E(e,"id","fileSelect"),E(e,"class","svelte-1bkh0a3")},m(_,p){L(_,e,p),m(e,n),m(e,t),u&&u.m(e,null),m(e,i),m(e,o),L(_,a,p),K(d,_,p),r=!0,h||(f=[J(n,"click",s[2]),J(o,"click",s[4])],h=!0)},p(_,[p]){_[0]?u?u.p(_,p):(u=Ke(_),u.c(),u.m(e,i)):u&&(u.d(1),u=null);const b={};p&2&&(b.orgtree=_[1]),d.$set(b)},i(_){r||(v(d.$$.fragment,_),r=!0)},o(_){T(d.$$.fragment,_),r=!1},d(_){_&&(g(e),g(a)),u&&u.d(),W(d,_),h=!1,Xe(f)}}}function $t(s,e,n){let l,t="https://raw.githubusercontent.com/crazyfraggle/org-mind/main/static/orgmind.org",i=null,o=`#+TITLE: Org Mode Mindmap
	
* View local files
** Click the "Open file" button
** Select a file
** If you change the file locally, the reload file button will reload it in place
* View online files
** Click the "Open URL" button
** Enter a URL
* Usage
** Click on the +/- icon next to a topic to expand or collapse it
** Settings
*** Click on the gear icon in the top right corner
*** Change the "Right only" to keep the root node on the left`;async function c(){if(n(0,[i]=await window.showOpenFilePicker(),i),!i){alert("No file selected");return}const h=await(await i.getFile()).text();n(5,o=h)}async function a(){if(!i){alert("No file selected");return}const h=await(await i.getFile()).text();n(5,o=h)}async function d(){if(t=prompt("Enter URL",t||""),!t)return;const h=await(await fetch(t)).text();n(5,o=h)}return s.$$.update=()=>{s.$$.dirty&32&&n(1,l=Et(o))},[i,l,c,a,d,o]}class Rt extends te{constructor(e){super(),le(this,e,$t,wt,ee,{})}}export{Rt as component};
