import{s as ne,e as me,i as N,y as ce,d as m,A as oe,f as k,l as V,g as y,h as T,m as z,j as b,x as v,n as K,a as A,c as O,B as ae,C as Ve,p as F,o as he,D as ue,E as Ae,F as fe,G as ve,H as Oe,I as ze,J as Me}from"../chunks/scheduler.af1e29e3.js";import{S as le,i as se,a as $,g as Q,t as B,c as Z,f as Se,b as H,d as W,m as Y,e as X}from"../chunks/index.17781532.js";function x(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function be(s,e,l){const t=s.slice();return t[1]=e[l],t}function Ee(s){let e,l=s[1].title+"",t;return{c(){e=k("span"),t=V(l),this.h()},l(n){e=y(n,"SPAN",{class:!0});var a=T(e);t=z(a,l),a.forEach(m),this.h()},h(){b(e,"class","crumb")},m(n,a){N(n,e,a),v(e,t)},p(n,a){a&1&&l!==(l=n[1].title+"")&&K(t,l)},d(n){n&&m(e)}}}function je(s){let e,l=x(s[0]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ee(be(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=me()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);e=me()},m(n,a){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(n,a);N(n,e,a)},p(n,[a]){if(a&1){l=x(n[0]);let c;for(c=0;c<l.length;c+=1){const h=be(n,l,c);t[c]?t[c].p(h,a):(t[c]=Ee(h),t[c].c(),t[c].m(e.parentNode,e))}for(;c<t.length;c+=1)t[c].d(1);t.length=l.length}},i:ce,o:ce,d(n){n&&m(e),oe(t,n)}}}function Fe(s,e,l){let{crumbs:t=[]}=e;return s.$$set=n=>{"crumbs"in n&&l(0,t=n.crumbs)},[t]}class He extends le{constructor(e){super(),se(this,e,Fe,je,ne,{crumbs:0})}}function We(s){let e,l,t,n,a,c,h,d;return{c(){e=k("div"),l=k("label"),t=V(s[3]),n=k("input"),a=A(),c=k("canvas"),this.h()},l(u){e=y(u,"DIV",{class:!0});var r=T(e);l=y(r,"LABEL",{class:!0});var g=T(l);t=z(g,s[3]),n=y(g,"INPUT",{type:!0,class:!0}),g.forEach(m),a=O(r),c=y(r,"CANVAS",{class:!0}),T(c).forEach(m),r.forEach(m),this.h()},h(){b(n,"type","checkbox"),b(n,"class","svelte-gjkueq"),b(l,"class","expander svelte-gjkueq"),b(c,"class","svelte-gjkueq"),b(e,"class","expander svelte-gjkueq")},m(u,r){N(u,e,r),v(e,l),v(l,t),v(l,n),n.checked=s[0],v(e,a),v(e,c),s[6](c),s[7](e),h||(d=ae(n,"change",s[5]),h=!0)},p(u,[r]){r&8&&K(t,u[3]),r&1&&(n.checked=u[0])},i:ce,o:ce,d(u){u&&m(e),s[6](null),s[7](null),h=!1,d()}}}function Ye(s,e,l){let t,{isExpanded:n=!1}=e,{exits:a=[]}=e;const c=Ve();let h=null,d=null;const u=(i,p)=>{const f=h==null?void 0:h.getContext("2d");if(console.log(h,f),!f||!h||!d)return;l(1,h.width=d.clientWidth,h),l(1,h.height=d.clientHeight,h);const E=h.getBoundingClientRect(),C=E.width,L=E.height;console.log(C,L),f.strokeStyle="black",f.lineWidth=1,f.beginPath(),f.moveTo(0,L/2),f.lineTo(C/2,L/2),i.forEach(M=>{f.moveTo(C/2,L/2),f.arcTo(C/2,M,C,M,C/2)}),f.stroke()};function r(){n=this.checked,l(0,n)}function g(i){F[i?"unshift":"push"](()=>{h=i,l(1,h)})}function o(i){F[i?"unshift":"push"](()=>{d=i,l(2,d)})}return s.$$set=i=>{"isExpanded"in i&&l(0,n=i.isExpanded),"exits"in i&&l(4,a=i.exits)},s.$$.update=()=>{s.$$.dirty&1&&l(3,t=n?"➖":"➕"),s.$$.dirty&1&&c("expanded",n),s.$$.dirty&17&&u(a)},[n,h,d,t,a,r,g,o]}class De extends le{constructor(e){super(),se(this,e,Ye,We,ne,{isExpanded:0,exits:4})}}function ke(s,e,l){const t=s.slice();return t[10]=e[l],t}function ye(s){let e,l,t,n,a,c;function h(o){s[5](o)}let d={exits:s[4]};s[1]!==void 0&&(d.isExpanded=s[1]),e=new De({props:d}),F.push(()=>Se(e,"isExpanded",h)),e.$on("expanded",s[6]);let u=x(s[0].children),r=[];for(let o=0;o<u.length;o+=1)r[o]=$e(ke(s,u,o));const g=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){H(e.$$.fragment),t=A(),n=k("ul");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){W(e.$$.fragment,o),t=O(o),n=y(o,"UL",{class:!0});var i=T(n);for(let p=0;p<r.length;p+=1)r[p].l(i);i.forEach(m),this.h()},h(){b(n,"class",a=ue(s[1]?"expanded":"collapsed")+" svelte-19sp6g2")},m(o,i){Y(e,o,i),N(o,t,i),N(o,n,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(n,null);s[7](n),c=!0},p(o,i){const p={};if(i&16&&(p.exits=o[4]),!l&&i&2&&(l=!0,p.isExpanded=o[1],Ae(()=>l=!1)),e.$set(p),i&1){u=x(o[0].children);let f;for(f=0;f<u.length;f+=1){const E=ke(o,u,f);r[f]?(r[f].p(E,i),$(r[f],1)):(r[f]=$e(E),r[f].c(),$(r[f],1),r[f].m(n,null))}for(Q(),f=u.length;f<r.length;f+=1)g(f);Z()}(!c||i&2&&a!==(a=ue(o[1]?"expanded":"collapsed")+" svelte-19sp6g2"))&&b(n,"class",a)},i(o){if(!c){$(e.$$.fragment,o);for(let i=0;i<u.length;i+=1)$(r[i]);c=!0}},o(o){B(e.$$.fragment,o),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)B(r[i]);c=!1},d(o){o&&(m(t),m(n)),X(e,o),oe(r,o),s[7](null)}}}function $e(s){let e,l;return e=new qe({props:{node:s[10]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.node=t[10]),e.$set(a)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Xe(s){let e,l,t,n=s[0].title+"",a,c,h,d=s[0].body+"",u,r,g,o=s[0].children.length>0&&ye(s);return{c(){e=k("li"),l=k("div"),t=k("span"),a=V(n),c=A(),h=k("div"),u=V(d),r=A(),o&&o.c(),this.h()},l(i){e=y(i,"LI",{class:!0});var p=T(e);l=y(p,"DIV",{class:!0});var f=T(l);t=y(f,"SPAN",{class:!0});var E=T(t);a=z(E,n),E.forEach(m),c=O(f),h=y(f,"DIV",{class:!0});var C=T(h);u=z(C,d),C.forEach(m),f.forEach(m),r=O(p),o&&o.l(p),p.forEach(m),this.h()},h(){b(t,"class","title svelte-19sp6g2"),b(h,"class","body svelte-19sp6g2"),b(l,"class","subtopicContainer svelte-19sp6g2"),b(e,"class","subtopic svelte-19sp6g2")},m(i,p){N(i,e,p),v(e,l),v(l,t),v(t,a),v(l,c),v(l,h),v(h,u),v(e,r),o&&o.m(e,null),s[8](e),g=!0},p(i,[p]){(!g||p&1)&&n!==(n=i[0].title+"")&&K(a,n),(!g||p&1)&&d!==(d=i[0].body+"")&&K(u,d),i[0].children.length>0?o?(o.p(i,p),p&1&&$(o,1)):(o=ye(i),o.c(),$(o,1),o.m(e,null)):o&&(Q(),B(o,1,1,()=>{o=null}),Z())},i(i){g||($(o),g=!0)},o(i){B(o),g=!1},d(i){i&&m(e),o&&o.d(),s[8](null)}}}function Ge(s,e,l){let{node:t}=e,n=!1,a=null,c=null,h=[];const d=i=>{const p=(c==null?void 0:c.getBoundingClientRect())||{top:0};l(4,h=i?Array.from((c==null?void 0:c.children)||[]).map(f=>f.getBoundingClientRect()).map(f=>(console.log(f),f)).map(f=>f.top-p.top+f.height/2):[])};he(()=>{const i=new ResizeObserver(p=>{p.forEach(f=>{console.log("Resizing",f),d(n)})});return i.observe(a),()=>i.unobserve(a)});function u(i){n=i,l(1,n)}function r(i){fe.call(this,s,i)}function g(i){F[i?"unshift":"push"](()=>{c=i,l(3,c)})}function o(i){F[i?"unshift":"push"](()=>{a=i,l(2,a)})}return s.$$set=i=>{"node"in i&&l(0,t=i.node)},[t,n,a,c,h,u,r,g,o]}class qe extends le{constructor(e){super(),se(this,e,Ge,Xe,ne,{node:0})}}function we(s,e,l){const t=s.slice();return t[11]=e[l],t}function Te(s){let e,l=s[0].body+"",t;return{c(){e=k("div"),t=V(l),this.h()},l(n){e=y(n,"DIV",{class:!0});var a=T(e);t=z(a,l),a.forEach(m),this.h()},h(){b(e,"class","body svelte-4cgkdv")},m(n,a){N(n,e,a),v(e,t)},p(n,a){a&1&&l!==(l=n[0].body+"")&&K(t,l)},d(n){n&&m(e)}}}function Ce(s){let e,l,t,n,a,c;function h(o){s[5](o)}let d={exits:s[4]};s[1]!==void 0&&(d.isExpanded=s[1]),e=new De({props:d}),F.push(()=>Se(e,"isExpanded",h)),e.$on("expanded",s[6]);let u=x(s[0].children),r=[];for(let o=0;o<u.length;o+=1)r[o]=Ie(we(s,u,o));const g=o=>B(r[o],1,1,()=>{r[o]=null});return{c(){H(e.$$.fragment),t=A(),n=k("ul");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){W(e.$$.fragment,o),t=O(o),n=y(o,"UL",{class:!0});var i=T(n);for(let p=0;p<r.length;p+=1)r[p].l(i);i.forEach(m),this.h()},h(){b(n,"class",a=ue("subtopics "+(s[1]?"expanded":"collapsed"))+" svelte-4cgkdv")},m(o,i){Y(e,o,i),N(o,t,i),N(o,n,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(n,null);s[8](n),c=!0},p(o,i){const p={};if(i&16&&(p.exits=o[4]),!l&&i&2&&(l=!0,p.isExpanded=o[1],Ae(()=>l=!1)),e.$set(p),i&1){u=x(o[0].children);let f;for(f=0;f<u.length;f+=1){const E=we(o,u,f);r[f]?(r[f].p(E,i),$(r[f],1)):(r[f]=Ie(E),r[f].c(),$(r[f],1),r[f].m(n,null))}for(Q(),f=u.length;f<r.length;f+=1)g(f);Z()}(!c||i&2&&a!==(a=ue("subtopics "+(o[1]?"expanded":"collapsed"))+" svelte-4cgkdv"))&&b(n,"class",a)},i(o){if(!c){$(e.$$.fragment,o);for(let i=0;i<u.length;i+=1)$(r[i]);c=!0}},o(o){B(e.$$.fragment,o),r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)B(r[i]);c=!1},d(o){o&&(m(t),m(n)),X(e,o),oe(r,o),s[8](null)}}}function Ie(s){let e,l;return e=new qe({props:{node:s[11]}}),e.$on("expanded",s[7]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.node=t[11]),e.$set(a)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Je(s){let e,l,t,n=s[0].title+"",a,c,h,d,u=s[0].body&&Te(s),r=s[0].children.length>0&&Ce(s);return{c(){e=k("li"),l=k("div"),t=k("span"),a=V(n),c=A(),u&&u.c(),h=A(),r&&r.c(),this.h()},l(g){e=y(g,"LI",{class:!0});var o=T(e);l=y(o,"DIV",{class:!0});var i=T(l);t=y(i,"SPAN",{class:!0});var p=T(t);a=z(p,n),p.forEach(m),c=O(i),u&&u.l(i),i.forEach(m),h=O(o),r&&r.l(o),o.forEach(m),this.h()},h(){b(t,"class","title"),b(l,"class","topicContainer svelte-4cgkdv"),b(e,"class","topic svelte-4cgkdv")},m(g,o){N(g,e,o),v(e,l),v(l,t),v(t,a),v(l,c),u&&u.m(l,null),v(e,h),r&&r.m(e,null),s[9](e),d=!0},p(g,[o]){(!d||o&1)&&n!==(n=g[0].title+"")&&K(a,n),g[0].body?u?u.p(g,o):(u=Te(g),u.c(),u.m(l,null)):u&&(u.d(1),u=null),g[0].children.length>0?r?(r.p(g,o),o&1&&$(r,1)):(r=Ce(g),r.c(),$(r,1),r.m(e,null)):r&&(Q(),B(r,1,1,()=>{r=null}),Z())},i(g){d||($(r),d=!0)},o(g){B(r),d=!1},d(g){g&&m(e),u&&u.d(),r&&r.d(),s[9](null)}}}function Ke(s,e,l){let{orgnode:t}=e,n=!1,a=null,c=null,h=[];const d=p=>{const f=(c==null?void 0:c.getBoundingClientRect())||{top:0};l(4,h=p?Array.from((c==null?void 0:c.children)||[]).map(E=>E.getBoundingClientRect()).map(E=>(console.log(E),E)).map(E=>E.top-f.top+E.height/2):[])};he(()=>{const p=new ResizeObserver(f=>{f.forEach(E=>{console.log("Resizing",E),d(n)})});return p.observe(a),()=>p.unobserve(a)});function u(p){n=p,l(1,n)}function r(p){fe.call(this,s,p)}function g(p){fe.call(this,s,p)}function o(p){F[p?"unshift":"push"](()=>{c=p,l(3,c)})}function i(p){F[p?"unshift":"push"](()=>{a=p,l(2,a)})}return s.$$set=p=>{"orgnode"in p&&l(0,t=p.orgnode)},[t,n,a,c,h,u,r,g,o,i]}class xe extends le{constructor(e){super(),se(this,e,Ke,Je,ne,{orgnode:0})}}function Re(s,e,l){const t=s.slice();return t[10]=e[l],t[12]=l,t}function Be(s,e,l){const t=s.slice();return t[10]=e[l],t[12]=l,t}function Pe(s){let e,l,t=x(s[3]),n=[];for(let c=0;c<t.length;c+=1)n[c]=Le(Be(s,t,c));const a=c=>B(n[c],1,1,()=>{n[c]=null});return{c(){e=k("ul");for(let c=0;c<n.length;c+=1)n[c].c();this.h()},l(c){e=y(c,"UL",{id:!0,class:!0});var h=T(e);for(let d=0;d<n.length;d+=1)n[d].l(h);h.forEach(m),this.h()},h(){b(e,"id","left"),b(e,"class","svelte-7qtkn4")},m(c,h){N(c,e,h);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);l=!0},p(c,h){if(h&40){t=x(c[3]);let d;for(d=0;d<t.length;d+=1){const u=Be(c,t,d);n[d]?(n[d].p(u,h),$(n[d],1)):(n[d]=Le(u),n[d].c(),$(n[d],1),n[d].m(e,null))}for(Q(),d=t.length;d<n.length;d+=1)a(d);Z()}},i(c){if(!l){for(let h=0;h<t.length;h+=1)$(n[h]);l=!0}},o(c){n=n.filter(Boolean);for(let h=0;h<n.length;h+=1)B(n[h]);l=!1},d(c){c&&m(e),oe(n,c)}}}function Le(s){let e,l;return e=new xe({props:{orgnode:s[10]}}),e.$on("expanded",s[5]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p(t,n){const a={};n&8&&(a.orgnode=t[10]),e.$set(a)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Ne(s){let e,l;return e=new xe({props:{orgnode:s[10]}}),e.$on("expanded",s[5]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p(t,n){const a={};n&16&&(a.orgnode=t[10]),e.$set(a)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function Qe(s){let e,l,t,n,a,c,h,d,u,r,g,o,i,p,f,E,C=s[1].title+"",L,M,q,ie,j,U,S,ee;e=new He({props:{crumbs:[{title:s[1].title,node:s[1]},{title:s[1].children[0].title,node:s[1].children[0]}]}});let I=!s[2]&&Pe(s),G=x(s[4]),R=[];for(let _=0;_<G.length;_+=1)R[_]=Ne(Re(s,G,_));const Ue=_=>B(R[_],1,1,()=>{R[_]=null});return{c(){H(e.$$.fragment),l=A(),t=k("div"),n=k("label"),a=k("input"),c=V("Right only"),h=A(),d=k("label"),u=V("Level: "),r=k("input"),g=A(),o=k("div"),i=k("div"),I&&I.c(),p=A(),f=k("div"),E=k("span"),L=V(C),M=A(),q=k("ul");for(let _=0;_<R.length;_+=1)R[_].c();ie=A(),j=k("canvas"),this.h()},l(_){W(e.$$.fragment,_),l=O(_),t=y(_,"DIV",{class:!0});var w=T(t);n=y(w,"LABEL",{});var D=T(n);a=y(D,"INPUT",{type:!0}),c=z(D,"Right only"),D.forEach(m),h=O(w),d=y(w,"LABEL",{});var P=T(d);u=z(P,"Level: "),r=y(P,"INPUT",{type:!0}),P.forEach(m),w.forEach(m),g=O(_),o=y(_,"DIV",{id:!0,class:!0});var J=T(o);i=y(J,"DIV",{id:!0,class:!0});var te=T(i);I&&I.l(te),p=O(te),f=y(te,"DIV",{id:!0,class:!0});var pe=T(f);E=y(pe,"SPAN",{class:!0});var ge=T(E);L=z(ge,C),ge.forEach(m),pe.forEach(m),M=O(te),q=y(te,"UL",{id:!0,class:!0});var _e=T(q);for(let de=0;de<R.length;de+=1)R[de].l(_e);_e.forEach(m),te.forEach(m),ie=O(J),j=y(J,"CANVAS",{id:!0,class:!0}),T(j).forEach(m),J.forEach(m),this.h()},h(){b(a,"type","checkbox"),b(r,"type","number"),b(t,"class","settings"),b(E,"class","title"),b(f,"id","root"),b(f,"class","svelte-7qtkn4"),b(q,"id","right"),b(q,"class","svelte-7qtkn4"),b(i,"id","map"),b(i,"class","svelte-7qtkn4"),b(j,"id","rootCanvas"),b(j,"class","svelte-7qtkn4"),b(o,"id","mapContainer"),b(o,"class","svelte-7qtkn4")},m(_,w){Y(e,_,w),N(_,l,w),N(_,t,w),v(t,n),v(n,a),a.checked=s[2],v(n,c),v(t,h),v(t,d),v(d,u),v(d,r),ve(r,s[0]),N(_,g,w),N(_,o,w),v(o,i),I&&I.m(i,null),v(i,p),v(i,f),v(f,E),v(E,L),v(i,M),v(i,q);for(let D=0;D<R.length;D+=1)R[D]&&R[D].m(q,null);v(o,ie),v(o,j),U=!0,S||(ee=[ae(a,"change",s[8]),ae(r,"input",s[9])],S=!0)},p(_,[w]){const D={};if(w&2&&(D.crumbs=[{title:_[1].title,node:_[1]},{title:_[1].children[0].title,node:_[1].children[0]}]),e.$set(D),w&4&&(a.checked=_[2]),w&1&&Oe(r.value)!==_[0]&&ve(r,_[0]),_[2]?I&&(Q(),B(I,1,1,()=>{I=null}),Z()):I?(I.p(_,w),w&4&&$(I,1)):(I=Pe(_),I.c(),$(I,1),I.m(i,p)),(!U||w&2)&&C!==(C=_[1].title+"")&&K(L,C),w&48){G=x(_[4]);let P;for(P=0;P<G.length;P+=1){const J=Re(_,G,P);R[P]?(R[P].p(J,w),$(R[P],1)):(R[P]=Ne(J),R[P].c(),$(R[P],1),R[P].m(q,null))}for(Q(),P=G.length;P<R.length;P+=1)Ue(P);Z()}},i(_){if(!U){$(e.$$.fragment,_),$(I);for(let w=0;w<G.length;w+=1)$(R[w]);U=!0}},o(_){B(e.$$.fragment,_),B(I),R=R.filter(Boolean);for(let w=0;w<R.length;w+=1)B(R[w]);U=!1},d(_){_&&(m(l),m(t),m(g),m(o)),X(e,_),I&&I.d(),oe(R,_),S=!1,ze(ee)}}}function Ze(s,e,l){let t,n,a,c,{orgtree:h}=e,{level:d=0}=e,u=!1;const r=()=>{setTimeout(()=>{const i=document.getElementById("map"),p=document.getElementById("rootCanvas");if(!i||!p)return;p.width=i.clientWidth,p.height=i.clientHeight;const f=p.getContext("2d");if(!f)return;const E=document.getElementById("root");if(!E)return;const C=i.getBoundingClientRect(),L=E.getBoundingClientRect(),M=L.x+L.width*7/8,q=L.y+L.height/2,ie=L.x+L.width*1/8,j=L.y+L.height/2;f.strokeStyle="black",f.lineWidth=2,document.querySelectorAll("#right .topic").forEach(U=>{const S=U.getBoundingClientRect(),ee=S.x,I=S.y+S.height/2;f.beginPath(),f.moveTo(M-C.x,q-C.y),f.lineTo(ee-C.x,I-C.y),f.stroke()}),document.querySelectorAll("#left .topic").forEach(U=>{const S=U.getBoundingClientRect(),ee=S.x+S.width,I=S.y+S.height/2;f.beginPath(),f.moveTo(ie-C.x,j-C.y),f.lineTo(ee-C.x,I-C.y),f.stroke()})},0)};he(()=>{const i=document.getElementById("mapContainer"),p=new ResizeObserver(f=>{f.forEach(E=>{console.log("Resizing",E),r()})});return p.observe(i),()=>p.unobserve(i)});function g(){u=this.checked,l(2,u)}function o(){d=Oe(this.value),l(0,d)}return s.$$set=i=>{"orgtree"in i&&l(1,h=i.orgtree),"level"in i&&l(0,d=i.level)},s.$$.update=()=>{s.$$.dirty&6&&l(7,t=!u&&h.children.length>2),s.$$.dirty&130&&l(6,n=t?Math.ceil(h.children.length/2):h.children.length),s.$$.dirty&66&&l(4,a=h.children.slice(0,n)),s.$$.dirty&66&&l(3,c=h.children.slice(n))},[d,h,u,c,a,r,n,t,g,o]}class et extends le{constructor(e){super(),se(this,e,Ze,Qe,ne,{orgtree:1,level:0})}}const re={header:/^(\*+)\s+(.*)$/,preformatted:/^(\s*):(?: (.*)$|$)/,unorderedListElement:/^(\s*)(?:-|\+|\s+\*)\s+(.*)$/,orderedListElement:/^(\s*)(\d+)(?:\.|\))\s+(.*)$/,tableSeparator:/^(\s*)\|((?:\+|-)*?)\|?$/,tableRow:/^(\s*)\|(.*?)\|?$/,blank:/^\s*$/,horizontalRule:/^(\s*)-{5,}$/,blockdirective:/^(\s*)#\+(?:(begin|end)_)?(.*)$/i,docdirective:/^(\s*)#\+(?:(TITLE|TODO|STARTUP)):\s*(.*)$/,comment:/^(\s*)#(.*)$/,line:/^(\s*)(.*)$/};function tt(s){var a;const e={line:0,title:"Untitled Org File",body:"",children:[]};let l=e,t=0;const n=s.split(`
`);for(let c=0;c<n.length;c++){const h=n[c];let d=null;if(d=h.match(re.header)){const u=d[1].length,r=d[2];if(u>t){const g={line:c,title:r,body:"",children:[],parent:l};l.children.push(g),l=g,t=u}else if(u===t){const g={line:c,title:r,body:"",children:[],parent:l.parent};(a=l.parent)==null||a.children.push(g),l=g}else if(u<t){const g={line:c,title:r,body:"",children:[]},o=t-u;let i=l.parent;for(let p=0;p<o;p++)i=i==null?void 0:i.parent;g.parent=i,i==null||i.children.push(g),l=g,t=u}}else if(d=h.match(re.docdirective)){console.log("Directive",d[1],d[2],d[3]);const u=d[2],r=d[3];u==="TITLE"?e.title=r:console.log("Unknown directive type: ",u)}else(d=h.match(re.blank))||((d=h.match(re.line))?l.body+=h+`
`:console.log("Unknown line type: ",h))}return e}function nt(s){let e,l,t="Open file",n,a,c,h,d;return a=new et({props:{orgtree:s[0]}}),{c(){e=k("div"),l=k("button"),l.textContent=t,n=A(),H(a.$$.fragment)},l(u){e=y(u,"DIV",{});var r=T(e);l=y(r,"BUTTON",{"data-svelte-h":!0}),Me(l)!=="svelte-jlhvw8"&&(l.textContent=t),n=O(r),W(a.$$.fragment,r),r.forEach(m)},m(u,r){N(u,e,r),v(e,l),v(e,n),Y(a,e,null),c=!0,h||(d=ae(l,"click",s[1]),h=!0)},p(u,[r]){const g={};r&1&&(g.orgtree=u[0]),a.$set(g)},i(u){c||($(a.$$.fragment,u),c=!0)},o(u){B(a.$$.fragment,u),c=!1},d(u){u&&m(e),X(a),h=!1,d()}}}function lt(s,e,l){let t,n=`#+TITLE: Org Mode Mindmap
	
* You need to click that "Open file" button to load a file.`;async function a(){const[c]=await window.showOpenFilePicker(),d=await(await c.getFile()).text();l(2,n=d)}return s.$$.update=()=>{s.$$.dirty&4&&l(0,t=tt(n))},[t,a,n]}class ot extends le{constructor(e){super(),se(this,e,lt,nt,ne,{})}}export{ot as component};
